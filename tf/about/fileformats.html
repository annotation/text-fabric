<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.6">
<title>tf.about.fileformats API documentation</title>
<meta name="description" content="TF File Format â€¦">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}#lunr-search{width:100%;font-size:1em;padding:6px 9px 5px 9px;border:1px solid silver}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });</script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML" integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>tf.about.fileformats</code></h1>
</header>
<section id="section-intro">
<h1 id="tf-file-format">TF File Format</h1>
<h2 id="overview">Overview</h2>
<p>A <code>.<a title="tf" href="../index.html">tf</a></code> feature file starts with a <em>header</em>, and is followed by the actual data.
The whole file is a plain text in UNICODE-utf8.</p>
<h2 id="header">Header</h2>
<p>A <code>.<a title="tf" href="../index.html">tf</a></code> feature file always starts with one or more metadata lines of the form</p>
<pre><code>@key
</code></pre>
<p>or</p>
<pre><code>@key=value
</code></pre>
<p>The first line must be either</p>
<pre><code>@node
</code></pre>
<p>or</p>
<pre><code>@edge
</code></pre>
<p>or</p>
<pre><code>@config
</code></pre>
<p>This tells TF whether the data in the feature file is a <em>node</em> feature
or an <em>edge</em> feature. The value <code>@config</code> means that the file will be used as
configuration info. It will only have metadata.</p>
<p>There <strong>must</strong> also be a type declaration:</p>
<pre><code>@valueType=type
</code></pre>
<p>where type is <code>str</code> or <code>int</code>. <code>@valueType</code> declares the type of the values in
this feature file. If it is anything other than <code>str</code> (=<em>string</em>), TF
will convert it to that type when it reads the data from the file. Currently,
the only other supported type is <code>int</code> for integers.</p>
<p>In edge features, there <strong>may</strong> also be a declaration</p>
<pre><code>@edgeValues
</code></pre>
<p>indicating that the edge feature carries values. The default is that an edge
does not carry values.</p>
<p>The rest of the metadata is optional for now, but it is recommended to put a
date stamp in it like this</p>
<pre><code>@dateCreated=2016-11-20T13:26:59Z
</code></pre>
<p>The time format should be <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a>.</p>
<h2 id="data">Data</h2>
<p>After the metadata, there must be exactly one blank line, and every line after
that is data.</p>
<h3 id="data-lines">Data lines</h3>
<p>The form of a data line is</p>
<pre><code>node_spec value
</code></pre>
<p>for node features, and</p>
<pre><code>node_spec node_spec value
</code></pre>
<p>for edge features.</p>
<p>These fields are separated by single tabs.</p>
<p><strong>NB</strong>: This is the default format. Under <em>Optimizations</em> below we shall
describe the bits that can be left out, which will lead to significant
improvement in space demands and processing speed.</p>
<h3 id="node-specification">Node Specification</h3>
<p>Every line contains a feature value that pertains to all nodes defined by its
<code>node_spec</code>, or to all edges defined by its pair of <code>node_spec</code>s.</p>
<p>A node spec denotes a <em>set</em> of nodes.</p>
<p>The simplest form of a node spec is just a single integer. Examples:</p>
<pre><code>3
45
425000
</code></pre>
<p>Ranges are also allowed. Examples</p>
<pre><code>1-10
5-13
28-57045
</code></pre>
<p>The nodes denoted by a range are all numbers between the endpoints of the range
(including at both sides). So</p>
<pre><code>2-4
</code></pre>
<p>denotes the nodes <code>2</code>, <code>3</code>, and <code>4</code>.</p>
<p>You can also combine numbers and ranges arbitrarily by separating them with
commas. Examples</p>
<pre><code>1-3,5-10,15,23-37
</code></pre>
<p>Such a specification denotes the union of what is denoted by each
comma-separated part.</p>
<p><strong>NB</strong> As node specs denote <em>sets</em> of nodes, the following node specs are in
fact equivalent</p>
<pre><code>1,1 and 1
2-3 and 3,2
1-5,2-7 and 1-7
</code></pre>
<p>We will be tolerant in that you may specify the end points of ranges in
arbitrary order:</p>
<pre><code>1-3 is the same as 3-1
</code></pre>
<h3 id="edges">Edges</h3>
<p>An edge is specified by an <em>ordered</em> pair of nodes. The edge is <em>from</em> the first
node in the pair <em>to</em> the second one. An edge spec consists of two node specs.
It denotes all edges that are <em>from</em> a node denoted by the first node spec <em>to</em>
a node denoted by the second node spec. An edge might be labeled, in that case
the label of the edge is specified by the <em>value</em> after the two node specs.</p>
<h4 id="value">Value</h4>
<p>The value is arbitrary text. The type of the value must conform to the
<code>@valueType</code> declaration in the feature file. If it is missing, it is assumed to
be <code>str</code>, which is the type of UNICODE-utf8 strings. If it is <code>int</code>, it should
be a valid representation of an integer number,</p>
<p>There are a few escapes:</p>
<ul>
<li><code>\\</code> backslash</li>
<li><code>\t</code> tab</li>
<li><code>\n</code> newline These characters MUST always be escaped in a value string,
otherwise the line as a whole might be ambiguous.</li>
</ul>
<p><strong>NB:</strong> There is no representation for the absence of a value. The empty string
as value means that there is a value and it is the empty string. If you want to
describe the fact that node <code>n</code> does not have a value for the feature in
question, the node must be left out of the feature. In order words, there should
be no data line in the feature that targets this node.</p>
<p>If the declared value type (<code>@valueType</code>) of a feature is <code>int</code>, then its empty
values will be taken as absence of values, though.</p>
<h2 id="consistency-requirements">Consistency requirements</h2>
<p>There are a few additional requirements on feature data, having to do with the
fact that features annotate nodes or edges of a graph.</p>
<h3 id="single-values">Single values</h3>
<p>It is assumed that a node feature assigns only one value to the same node. If
the data contains multiple assignments to a node, only the last assignment will
be honoured, the previous ones will be discarded.</p>
<p>Likewise, it is assumed that an edge feature assigns only one value to the same
edge. If the data contains multiple assignments to an edge, only the last
assignment will be honoured.</p>
<p>Violations maybe or may not be reported, and processing may continue without
warnings.</p>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<p><a href="https://github.com/annotation" title="annotation on GitHub"><img src="../../tf/images/tf-small.png" alt="annotation"></a></p>
<p><a href="../../tf/index.html">tf home</a> -
<a href="../../tf/cheatsheet.html">cheat sheet</a> -
<a href="https://github.com/annotation/text-fabric" title="GitHub repo"><img src="../../tf/images/GitHub_Logo.png" alt="GitHub" width="50"></a></p>
</p>
<form>
<input id="lunr-search" name="q" placeholder="ðŸ”Ž Search ..." aria-label="Search"
disabled minlength="2">
</form>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.16.0/tingle.min.css" integrity="sha512-b+T2i3P45i1LZM7I00Ci5QquB9szqaxu+uuk5TUSGjZQ4w4n+qujQiIuvTv2BxE7WCGQCifNMksyKILDiHzsOg==" crossorigin>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.16.0/tingle.min.js" integrity="sha512-2B9/byNV1KKRm5nQ2RLViPFD6U4dUjDGwuW1GU+ImJh8YinPU9Zlq1GzdTMO+G2ROrB5o1qasJBy1ttYz0wCug==" crossorigin></script>
<style>
.modal-dialog iframe {
width: 100vw;
height: calc(100vh - 80px);
}
@media screen and (min-width: 700px) {
.modal-dialog iframe {
width: 70vw;
height: 80vh;
}
}
.modal-dialog .tingle-modal-box {width: auto;}
.modal-dialog .tingle-modal-box__content {padding: 0;}
</style>
<script>
const input = document.getElementById('lunr-search');
input.disabled = false;
input.form.addEventListener('submit', (ev) => {
ev.preventDefault();
const url = new URL(window.location);
url.searchParams.set('q', input.value);
history.replaceState({}, null, url.toString());
search(input.value);
});
const query = new URL(window.location).searchParams.get('q');
if (query)
search(query);
function search(query) {
const url = '../../doc-search.html#' + encodeURIComponent(query);
new tingle.modal({
cssClass: ['modal-dialog'],
onClose: () => {
const url = new URL(window.location);
url.searchParams.delete('q');
history.replaceState({}, null, url.toString());
setTimeout(() => input.focus(), 100);
}
}).setContent('<iframe src="' + url + '"></iframe>').open();
}
</script>
<div class="toc">
<ul>
<li><a href="#tf-file-format">TF File Format</a><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#header">Header</a></li>
<li><a href="#data">Data</a><ul>
<li><a href="#data-lines">Data lines</a></li>
<li><a href="#node-specification">Node Specification</a></li>
<li><a href="#edges">Edges</a><ul>
<li><a href="#value">Value</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#consistency-requirements">Consistency requirements</a><ul>
<li><a href="#single-values">Single values</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="tf.about" href="index.html">tf.about</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<a href="https://pure.knaw.nl/portal/en/persons/dirk-roorda">Dirk Roorda</a>
<a href="https://huc.knaw.nl"><img alt="HuC" src="../../tf/images/huc.png" width="200" alt="Humanities Cluster"></a>
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.6</a>.</p>
</footer>
</body>
</html>
