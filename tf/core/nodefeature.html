<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.6">
<title>tf.core.nodefeature API documentation</title>
<meta name="description" content="Mappings from nodes to values â€¦">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}#lunr-search{width:100%;font-size:1em;padding:6px 9px 5px 9px;border:1px solid silver}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source > summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible;min-width:max-content}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin:1em 0}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });</script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML" integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
/* Collapse source docstrings */
setTimeout(() => {
[...document.querySelectorAll('.hljs.language-python > .hljs-string')]
.filter(el => el.innerHTML.length > 200 && ['"""', "'''"].includes(el.innerHTML.substring(0, 3)))
.forEach(el => {
let d = document.createElement('details');
d.classList.add('hljs-string');
d.innerHTML = '<summary>"""</summary>' + el.innerHTML.substring(3);
el.replaceWith(d);
});
}, 100);
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>tf.core.nodefeature</code></h1>
</header>
<section id="section-intro">
<h1 id="mappings-from-nodes-to-values">Mappings from nodes to values.</h1>
<p>Every node feature is logically a mapping from nodes to values,
string or integer.</p>
<p>A feature object gives you methods that you can pass a node and that returns
its value for that node.</p>
<p>It is easiest to think of all node features as a dictionary keyed by nodes.</p>
<p>However, some features have an optimised representation, and do not have
a dictionary underneath.</p>
<p>But you can still iterate over the data of a feature as if it were a
dictionary: <code><a title="tf.core.nodefeature.NodeFeature.items" href="#tf.core.nodefeature.NodeFeature.items">NodeFeature.items()</a></code></p>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="tf.core.nodefeature.NodeFeature"><code class="flex name class">
<span>class <span class="ident">NodeFeature</span></span>
<span>(</span><span>api, metaData, data)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/annotation/text-fabric/blob/a315d645ad14fd3cd0878c3c3a2698da6b1f9a39/tf/core/nodefeature.py#L27-L133" class="git-link" target="_blank">Browse git</a>
</summary>
<pre><code class="python">class NodeFeature:
    &#34;&#34;&#34;Provides access to (node) feature data.

    For feature `fff` it is the result of `F.fff` or `Fs(&#39;fff&#39;)`.
    &#34;&#34;&#34;

    def __init__(self, api, metaData, data):
        self.api = api
        self.meta = metaData
        &#34;&#34;&#34;Metadata of the feature.

        This is the information found in the lines starting with `@`
        in the `.tf` feature file.
        &#34;&#34;&#34;

        self.data = data

    def items(self):
        &#34;&#34;&#34;A generator that yields the items of the feature, seen as a mapping.

        It does not yield entries for nodes without values,
        so this gives you a rather efficient way to iterate over
        just the feature data, instead of over all nodes.

        If you need this repeatedly, or you need the whole dictionary,
        you can store the result as follows:

           data = dict(F.fff.items())

        &#34;&#34;&#34;

        return self.data.items()

    def v(self, n):
        &#34;&#34;&#34;Get the value of a feature for a node.

        Parameters
        ----------
        n: integer
            The node in question

        Returns
        -------
        integer | string | None
            The value of the feature for that node, if it is defined, else `None`.
        &#34;&#34;&#34;

        if n in self.data:
            return self.data[n]
        return None

    def s(self, val):
        &#34;&#34;&#34;Query all nodes having a specified feature value.

        This is an other way to walk through nodes than using
        `tf.core.nodes.Nodes.walk`.

        Parameters
        ----------
        value: integer | string
            The feature value that all resulting nodes have.

        Returns
        -------
        tuple of integer
            All nodes that have this value for this feature,
            sorted in the canonical order.
            (`tf.core.nodes`)
        &#34;&#34;&#34;

        Crank = self.api.C.rank.data
        return tuple(
            sorted(
                [n for n in self.data if self.data[n] == val],
                key=lambda n: Crank[n - 1],
            )
        )

    def freqList(self, nodeTypes=None):
        &#34;&#34;&#34;Frequency list of the values of this feature.

        Inspect the values of this feature and see how often they occur.

        Parameters
        ----------
        nodeTypes: set of string, optional None
            If you pass a set of node types, only the values for nodes
            within those types will be counted.

        Returns
        -------
        tuple of 2-tuple
            A tuple of `(value, frequency)`, items, ordered by `frequency`,
            highest frequencies first.

        &#34;&#34;&#34;

        fql = collections.Counter()
        if nodeTypes is None:
            for n in self.data:
                fql[self.data[n]] += 1
        else:
            fOtype = self.api.F.otype.v
            for n in self.data:
                if fOtype(n) in nodeTypes:
                    fql[self.data[n]] += 1
        return tuple(sorted(fql.items(), key=lambda x: (-x[1], x[0])))</code></pre>
</details>
<div class="desc"><p>Provides access to (node) feature data.</p>
<p>For feature <code>fff</code> it is the result of <code>F.fff</code> or <code>Fs('fff')</code>.</p></div>
<h3>Instance variables</h3>
<dl>
<dt id="tf.core.nodefeature.NodeFeature.meta"><code class="name">var <span class="ident">meta</span></code></dt>
<dd>
<div class="desc"><p>Metadata of the feature.</p>
<p>This is the information found in the lines starting with <code>@</code>
in the <code>.<a title="tf" href="../index.html">tf</a></code> feature file.</p></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="tf.core.nodefeature.NodeFeature.freqList"><code class="name flex">
<span>def <span class="ident">freqList</span></span>(<span>self, nodeTypes=None)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/annotation/text-fabric/blob/a315d645ad14fd3cd0878c3c3a2698da6b1f9a39/tf/core/nodefeature.py#L105-L133" class="git-link" target="_blank">Browse git</a>
</summary>
<pre><code class="python">def freqList(self, nodeTypes=None):
    &#34;&#34;&#34;Frequency list of the values of this feature.

    Inspect the values of this feature and see how often they occur.

    Parameters
    ----------
    nodeTypes: set of string, optional None
        If you pass a set of node types, only the values for nodes
        within those types will be counted.

    Returns
    -------
    tuple of 2-tuple
        A tuple of `(value, frequency)`, items, ordered by `frequency`,
        highest frequencies first.

    &#34;&#34;&#34;

    fql = collections.Counter()
    if nodeTypes is None:
        for n in self.data:
            fql[self.data[n]] += 1
    else:
        fOtype = self.api.F.otype.v
        for n in self.data:
            if fOtype(n) in nodeTypes:
                fql[self.data[n]] += 1
    return tuple(sorted(fql.items(), key=lambda x: (-x[1], x[0])))</code></pre>
</details>
<div class="desc"><p>Frequency list of the values of this feature.</p>
<p>Inspect the values of this feature and see how often they occur.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>nodeTypes</code></strong> :&ensp;<code>set</code> of <code>string</code>, optional <code>None</code></dt>
<dd>If you pass a set of node types, only the values for nodes
within those types will be counted.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple</code> of <code>2-tuple</code></dt>
<dd>A tuple of <code>(value, frequency)</code>, items, ordered by <code>frequency</code>,
highest frequencies first.</dd>
</dl></div>
</dd>
<dt id="tf.core.nodefeature.NodeFeature.items"><code class="name flex">
<span>def <span class="ident">items</span></span>(<span>self)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/annotation/text-fabric/blob/a315d645ad14fd3cd0878c3c3a2698da6b1f9a39/tf/core/nodefeature.py#L44-L58" class="git-link" target="_blank">Browse git</a>
</summary>
<pre><code class="python">def items(self):
    &#34;&#34;&#34;A generator that yields the items of the feature, seen as a mapping.

    It does not yield entries for nodes without values,
    so this gives you a rather efficient way to iterate over
    just the feature data, instead of over all nodes.

    If you need this repeatedly, or you need the whole dictionary,
    you can store the result as follows:

       data = dict(F.fff.items())

    &#34;&#34;&#34;

    return self.data.items()</code></pre>
</details>
<div class="desc"><p>A generator that yields the items of the feature, seen as a mapping.</p>
<p>It does not yield entries for nodes without values,
so this gives you a rather efficient way to iterate over
just the feature data, instead of over all nodes.</p>
<p>If you need this repeatedly, or you need the whole dictionary,
you can store the result as follows:</p>
<p>data = dict(F.fff.items())</p></div>
</dd>
<dt id="tf.core.nodefeature.NodeFeature.s"><code class="name flex">
<span>def <span class="ident">s</span></span>(<span>self, val)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/annotation/text-fabric/blob/a315d645ad14fd3cd0878c3c3a2698da6b1f9a39/tf/core/nodefeature.py#L78-L103" class="git-link" target="_blank">Browse git</a>
</summary>
<pre><code class="python">def s(self, val):
    &#34;&#34;&#34;Query all nodes having a specified feature value.

    This is an other way to walk through nodes than using
    `tf.core.nodes.Nodes.walk`.

    Parameters
    ----------
    value: integer | string
        The feature value that all resulting nodes have.

    Returns
    -------
    tuple of integer
        All nodes that have this value for this feature,
        sorted in the canonical order.
        (`tf.core.nodes`)
    &#34;&#34;&#34;

    Crank = self.api.C.rank.data
    return tuple(
        sorted(
            [n for n in self.data if self.data[n] == val],
            key=lambda n: Crank[n - 1],
        )
    )</code></pre>
</details>
<div class="desc"><p>Query all nodes having a specified feature value.</p>
<p>This is an other way to walk through nodes than using
<code><a title="tf.core.nodes.Nodes.walk" href="nodes.html#tf.core.nodes.Nodes.walk">Nodes.walk()</a></code>.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>value</code></strong> :&ensp;<code>integer | string</code></dt>
<dd>The feature value that all resulting nodes have.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>tuple</code> of <code>integer</code></dt>
<dd>All nodes that have this value for this feature,
sorted in the canonical order.
(<code><a title="tf.core.nodes" href="nodes.html">tf.core.nodes</a></code>)</dd>
</dl></div>
</dd>
<dt id="tf.core.nodefeature.NodeFeature.v"><code class="name flex">
<span>def <span class="ident">v</span></span>(<span>self, n)</span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/annotation/text-fabric/blob/a315d645ad14fd3cd0878c3c3a2698da6b1f9a39/tf/core/nodefeature.py#L60-L76" class="git-link" target="_blank">Browse git</a>
</summary>
<pre><code class="python">def v(self, n):
    &#34;&#34;&#34;Get the value of a feature for a node.

    Parameters
    ----------
    n: integer
        The node in question

    Returns
    -------
    integer | string | None
        The value of the feature for that node, if it is defined, else `None`.
    &#34;&#34;&#34;

    if n in self.data:
        return self.data[n]
    return None</code></pre>
</details>
<div class="desc"><p>Get the value of a feature for a node.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>n</code></strong> :&ensp;<code>integer</code></dt>
<dd>The node in question</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>integer | string | None</code></dt>
<dd>The value of the feature for that node, if it is defined, else <code>None</code>.</dd>
</dl></div>
</dd>
</dl>
</dd>
<dt id="tf.core.nodefeature.NodeFeatures"><code class="flex name class">
<span>class <span class="ident">NodeFeatures</span></span>
</code></dt>
<dd>
<details class="source">
<summary>
<span>Expand source code</span>
<a href="https://github.com/annotation/text-fabric/blob/a315d645ad14fd3cd0878c3c3a2698da6b1f9a39/tf/core/nodefeature.py#L23-L24" class="git-link" target="_blank">Browse git</a>
</summary>
<pre><code class="python">class NodeFeatures:
    pass</code></pre>
</details>
<div class="desc"></div>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<p><a href="https://github.com/annotation" title="annotation on GitHub"><img src="../../tf/images/tf-small.png" alt="annotation"></a></p>
<p><a href="../../tf/index.html">tf home</a> -
<a href="../../tf/cheatsheet.html">cheat sheet</a> -
<a href="https://github.com/annotation/text-fabric" title="GitHub repo"><img src="../../tf/images/GitHub_Logo.png" alt="GitHub" width="50"></a></p>
</p>
<form>
<input id="lunr-search" name="q" placeholder="ðŸ”Ž Search ..." aria-label="Search"
disabled minlength="2">
</form>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.16.0/tingle.min.css" integrity="sha512-b+T2i3P45i1LZM7I00Ci5QquB9szqaxu+uuk5TUSGjZQ4w4n+qujQiIuvTv2BxE7WCGQCifNMksyKILDiHzsOg==" crossorigin>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tingle/0.16.0/tingle.min.js" integrity="sha512-2B9/byNV1KKRm5nQ2RLViPFD6U4dUjDGwuW1GU+ImJh8YinPU9Zlq1GzdTMO+G2ROrB5o1qasJBy1ttYz0wCug==" crossorigin></script>
<style>
.modal-dialog iframe {
width: 100vw;
height: calc(100vh - 80px);
}
@media screen and (min-width: 700px) {
.modal-dialog iframe {
width: 70vw;
height: 80vh;
}
}
.modal-dialog .tingle-modal-box {width: auto;}
.modal-dialog .tingle-modal-box__content {padding: 0;}
</style>
<script>
const input = document.getElementById('lunr-search');
input.disabled = false;
input.form.addEventListener('submit', (ev) => {
ev.preventDefault();
const url = new URL(window.location);
url.searchParams.set('q', input.value);
history.replaceState({}, null, url.toString());
search(input.value);
});
const query = new URL(window.location).searchParams.get('q');
if (query)
search(query);
function search(query) {
const url = '../../doc-search.html#' + encodeURIComponent(query);
new tingle.modal({
cssClass: ['modal-dialog'],
onClose: () => {
const url = new URL(window.location);
url.searchParams.delete('q');
history.replaceState({}, null, url.toString());
setTimeout(() => input.focus(), 100);
}
}).setContent('<iframe src="' + url + '"></iframe>').open();
}
</script>
<div class="toc">
<ul>
<li><a href="#mappings-from-nodes-to-values">Mappings from nodes to values.</a></li>
</ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="tf.core" href="index.html">tf.core</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="tf.core.nodefeature.NodeFeature" href="#tf.core.nodefeature.NodeFeature">NodeFeature</a></code></h4>
<ul class="">
<li><code><a title="tf.core.nodefeature.NodeFeature.freqList" href="#tf.core.nodefeature.NodeFeature.freqList">freqList</a></code></li>
<li><code><a title="tf.core.nodefeature.NodeFeature.items" href="#tf.core.nodefeature.NodeFeature.items">items</a></code></li>
<li><code><a title="tf.core.nodefeature.NodeFeature.meta" href="#tf.core.nodefeature.NodeFeature.meta">meta</a></code></li>
<li><code><a title="tf.core.nodefeature.NodeFeature.s" href="#tf.core.nodefeature.NodeFeature.s">s</a></code></li>
<li><code><a title="tf.core.nodefeature.NodeFeature.v" href="#tf.core.nodefeature.NodeFeature.v">v</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="tf.core.nodefeature.NodeFeatures" href="#tf.core.nodefeature.NodeFeatures">NodeFeatures</a></code></h4>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<a href="https://pure.knaw.nl/portal/en/persons/dirk-roorda">Dirk Roorda</a>
<a href="https://huc.knaw.nl"><img alt="HuC" src="../../tf/images/huc.png" width="200" alt="Humanities Cluster"></a>
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.6</a>.</p>
</footer>
</body>
</html>
